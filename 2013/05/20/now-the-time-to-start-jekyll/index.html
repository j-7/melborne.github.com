
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    
      <title>Jekyllいつやるの？ジキやルの？今でしょ！</title>
    
    <meta name="description" content="" />
    <meta name="author" content="kyoendo" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter-ext/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="/assets/themes/twitter-ext/css/style.css?body=1" rel="stylesheet" type="text/css" media="all" />
    <link href="/assets/themes/twitter-ext/css/syntax.css" rel="stylesheet" type="text/css" />
    <link href="/assets/themes/twitter-ext/css/lightbox.css" rel="stylesheet" />
    <link media="only screen and (max-device-width: 480px)" href="/assets/themes/twitter-ext/css/iphone.css" type="text/css" rel="stylesheet" />
    <!--<link media="only screen and (device-width: 768px)" href="/assets/themes/twitter-ext/css/ipad.css" type="text/css" rel="stylesheet" />-->
    <!--<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />-->
    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico" />
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png" />-->
<!--<script type="text/x-mathjax-config">-->
  <!--MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ["\\(","\\)"]] } });-->
<!--</script>-->
<!--<script type="text/javascript"-->
  <!--src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">-->
<!--</script>-->
  </head>
  <body>
    <div id="fb-root"></div>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="avatar" href="/">
            <img src="http://gravatar.com/avatar/97aa01a6f87da85251be77792dec1d9c?s=80" height="75" width="75" class="avatar" />
          </a>
          <a class="brand" href="/">hp12c</a>
          <div id='rss'>
            <a href="http://feeds.feedburner.com/github/melborne" title="Subscribe to my feed" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon32x32.png" alt="" style="border:0"/></a><a href="http://feeds.feedburner.com/github/melborne" title="Subscribe to my feed" rel="alternate" type="application/rss+xml"></a>
            <!--<a href="/atom.xml" id="rss">-->
              <!--<img src="/assets/images/site/rss.png" alt="rss" title="RSS" height="22" width="22" />-->
            <!--</a>-->
          </div>
          <ul class="nav">
            <li>
              <a class="books" href="/books/">Books</a>
            </li>
            <li>
              <a class="mygems" href="https://rubygems.org/profiles/melborne/">Gems</a>
            </li>
            <li>
              <a class="myproducts" href="http://welove.herokuapp.com/users/54">Products</a>
            </li>
            
            
            


  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  

  

  
    
  

  
    
    	
      <li><a href="/tags.html">Tags</a></li>
    	
    
  








            <li class='site'>
              <a href="https://twitter.com/merborne" id="twitter">
                <img src="/assets/images/site/twitter.png" alt="twitter" title="@merborne on Twitter" height="32" width="32" />
              </a>
            </li>
            <li class='site'>
              <a href="https://github.com/melborne" id="github">
                <img src="/assets/images/site/github.png" alt="github" title="@melborne on GitHub" height="24" width="24" />
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="content">
        
<div class="page-header span8">
  <div class="date"><span>20 May 2013</span></div>
  <h1 class='page-title'><a href="/2013/05/20/now-the-time-to-start-jekyll">Jekyllいつやるの？ジキやルの？今でしょ！</a> <small>  </small></h1>
</div>

<div class="row">
  <div class="span9">
    <div class="ad" id="topAdsense">
      <script type="text/javascript"><!--
      google_ad_client = "ca-pub-8790567277062819";
      /* hp12c */
      google_ad_slot = "7055414638";
      google_ad_width = 728;
      google_ad_height = 90;
      //-->
      </script>
      <script type="text/javascript"
      src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script>
    </div>

    

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<p>す、すいません... ベタなタイトルで...。</p>

<h2>Jekyll Version 1.0</h2>

<p>2013年5月5日にJekyllの<code>Version 1.0</code>がリリースされました。</p>

<blockquote><p><a href="http://jekyllrb.com/" title="Jekyll • Simple, blog-aware, static sites">Jekyll • Simple, blog-aware, static sites</a></p>

<p><a href="http://blog.parkermoore.de/2013/05/06/jekyll-1-dot-0-released/" title="Jekyll 1.0 Released - Musings of Parker J. Moore">Jekyll 1.0 Released - Musings of Parker J. Moore</a></p></blockquote>

<p><img src="/assets/images/2013/05/jk/jekylltop.png" alt="Alt title" /></p>

<p>2011年12月のVersion0.11.2以降、Jekyllの開発は停滞気味でした。しかし、<a href="https://github.com/parkr" title="parkr (Parker Moore)">parkr (Parker Moore)</a>氏がJekyllのcontributorとして参加したことを機に、昨年12月15日頃から新たな胎動が始まり、同22日に大きな問題を解決したVersion0.12.0がリリースされました。その後も怒涛の勢いでコミットが投げられ、遂に、5月5日に<code>Version 1.0</code>がリリースされたのでした。Githubにおける<a href="https://github.com/mojombo/jekyll/graphs/commit-activity" title="Commit Activity · mojombo/jekyll">Commit Activity</a>グラフを見るとその変化がよくわかると思います。</p>

<p><img src="/assets/images/2013/05/jk/jekyll.png" alt="Alt title" /></p>

<p>「オープンソースは生きてる（生き物である）」ってことを実感させられる出来事です。</p>

<h2>新機能</h2>

<p>上記の活動を経て、新Jekyllには次のような比較的大きい新たな機能・改善が導入されました（0.12.0からの機能も含む）。</p>

<blockquote><ol>
<li>サブコマンド方式が採用され、<code>new</code>, <code>build</code>, <code>serve</code>, <code>import</code>などのサブコマンドが導入された。</li>
<li><code>jekyll new</code>コマンドにより、簡単にブログのひな形が作れるようになった。</li>
<li>下書き記事を書きやすい環境ができた（Drafts）。</li>
<li>記事の引用機能が導入された（Excerpt）。</li>
<li>ページネーションができるようになった（Paginator）。</li>
<li>コードのシンタックスハイライトおよびgistタグが組み込みとなった。</li>
<li>公式サイトが大幅リニューアルされ、ドキュメントが充実した。</li>
<li>Pygments.rbの採用によりビルドが高速化された（0.12.0より）。</li>
<li>他ブログからの移行を支援するmigrate機能をjekyll-migrateというサブgemに集約した。</li>
</ol>
</blockquote>

<p>このブログもJekyll（+Github Pages）で構築されていますが、個人的に特にうれしいのは公式サイトにおけるドキュメントの充実っぷりと、Pygments.rbの採用です。ドキュメントは分かりやすく整理され、かつ記述も丁寧で素晴らしいです。現状英語のみですが一読をお薦めします。</p>

<blockquote><p><a href="http://jekyllrb.com/docs/home/" title="Welcome">Jekyll Docs</a></p></blockquote>

<p>また、後者についてですが、Jekyllではビルドの度に全ての記事をコンパイルするので、このブログのようにコードを大量に含むブログのビルドには、そのシンタックスハイライト処理のために悲しいくらいの時間が掛かります。これがPygments.rbの採用により大幅に改善されました。つまりこのサイトでは９分（！）が１分になりました<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup>。詳細は以下の記事が参考になります。</p>

<blockquote><p><a href="http://tech.nitoyon.com/ja/blog/2012/12/25/jekyll-0-12-0/" title="Jekyll の 0.12.0 でシンタックス ハイライトが便利になった - てっく煮ブログ">Jekyll の 0.12.0 でシンタックス ハイライトが便利になった - てっく煮ブログ</a></p></blockquote>

<h2>Jekyllをいつやるか</h2>

<p>Version 1.0によりJekyllの完成度は格段に高まりました。<code>jekyll new</code>で簡単にブログのひな形ができちゃうし、移行ツールも充実してるし、Githubの無料ホスティング<a href="http://pages.github.com/" title="GitHub Pages">GitHub Pages</a>もあるし、プログラマが自分に適した快適なブログ環境を構築するのに、もはや何の障壁もありません。</p>

<p>では、Jekyllをいつやるのか？</p>

<blockquote><ol>
<li>今やる</li>
<li>そのうちやる（ジキやル）</li>
<li>やる予定なし</li>
</ol>
</blockquote>

<p>環境が整ったって言ったって、ドキュメントは英語だし、簡単なチュートリアルくらい無いとそう簡単にはねぇ...。</p>

<p>日本語の電子書籍でもあればやるキッカケにもなるんだけどねぇ...。</p>

<p>ちなみに、Rubyの公式サイトも今やJekyllを使って構築されているんですね...。</p>

<p><a href="http://www.ruby-lang.org/ja/" title="オブジェクト指向スクリプト言語 Ruby">オブジェクト指向スクリプト言語 Ruby</a>
    このサイトはRubyとJekyllによって構築されています。 また、コンテンツはRubyコミュニティによって管理されています。 このサイトに関する質問やコメントはGitHubへのissueまたはpull request、もしくはwebmaster までお願いします。</p>

<p>...</p>

<p>そんなわけで...</p>

<p>^ ^;</p>

<p><br /></p>

<hr />

<h2>30分のチュートリアルでJekyllを理解する</h2>

<p>１年前に自分はこのブログでJekyllのチュートリアルの記事を書きました。</p>

<blockquote><p><a href="http://melborne.github.io/2012/05/13/first-step-of-jekyll/" title="30分のチュートリアルでJekyllを理解する">30分のチュートリアルでJekyllを理解する</a></p></blockquote>

<p>この度、これを加筆・訂正しJekyllの最新バージョン（Version 1.0.2）に対応させましたので、ここに公開致します。</p>

<p>前記事からの追加変更点は次のとおりです。</p>

<blockquote><ol>
<li>Jekyll Version 1.0.2に対応するよう記述を修正。</li>
<li>Jekyllの特徴について追記。</li>
<li>Jekyll newコマンドについて追記。</li>
<li>Excerpt（記事引用機能）について追記。</li>
<li>categoriesについて追記。</li>
<li>gistタグについて追記。</li>
<li>下書き（Drafts）機能について追記。</li>
<li>ページネーション、他のブログからの移管について追記。</li>
<li>その他細部の修正。</li>
</ol>
</blockquote>

<p>加えて前回同様、本記事を電子書籍化しました。</p>

<p><img src="/assets/images/2013/05/jk/jekyll_cover.png" alt="Alt title" /></p>

<pre><code>（目次）
１章　Jekyllとは
２章　Jekyllを知る
３章　記事の作成
４章　デフォルト設定の変更
５章　CSSによるスタイル設定
６章　グローバル変数「site」
７章　Liquid制御構文
８章　グローバル変数「page」
９章　Liquidによるシンタックスハイライト
１０章　プラグイン
１１章　その他の機能
１２章　まとめ
</code></pre>

<p>電子書籍は、いつものようにGumroadを通して販売し、EPUB形式に加えkindleで扱えるMOBI形式を同梱しています。価格は105円です<sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup>。</p>

<p>興味のある方、無くても暇な方、投げ銭したい方、購入ご検討いただければ大変にうれしく思いますm(__)m</p>

<blockquote><p><a href="http://melborne.github.io/books/" title="M'ELBORNE BOOKS">M'ELBORNE BOOKS</a></p></blockquote>

<hr />

<h2>１章　Jekyllとは</h2>

<p><a href="http://jekyllrb.com/" title="jekyll">Jekyll</a>は、ブログのような静的サイトを構築するためのRuby製ファイルジェネレータです。Jekyllの特徴としては、以下の様な点が挙げられます。</p>

<blockquote><ol>
<li>HTML簡略記法としてMarkdownまたはTextile記法が使える。</li>
<li>テンプレート言語Liquidを使って、シンタックスハイライト、gist、その他のタグの埋め込みによる拡張が簡単にできる。</li>
<li>Githubが提供するホスティングサービス「GitHub Pages」のエンジンとして利用されているので、Jekyllで構築されたサイトを無料で簡単に公開できると共に、gitによりそのソースおよび記事データの一元管理ができる。</li>
<li>Jekyllは静的サイトを構築するため軽いサイトが構築しやすい。</li>
<li>HTML整形後の文章をローカル環境で確認することができる。</li>
</ol>
</blockquote>

<p>一方で、<code>Jekyll</code>はあくまでファイルジェネレータであり、<a href="http://rubyonrails.org/" title="Ruby on Rails">Rails</a>のように、コマンド一つでサイトの基礎を全部構築してくれるフレームワークではありません。むしろ<a href="http://www.sinatrarb.com/" title="Sinatra">Sinatra</a>の思想に近く、静的サイト版Sinatraといった趣のツールです。従って、Jekyllを使ってブログサイトを構築しようとする場合、その規約に従って、自分で１つずつファイルを用意していく必要があります。</p>

<p>しかしながら、Sinatraに<a href="http://jp.padrinorb.com/" title="Padrino で素敵なウェブ開発を - Padrino Ruby Web Framework">Padrino</a>があるように、Jekyllにもそれをフレームワーク化するツールがあります。<a href="http://octopress.org/" title="Octopress">Octopress</a>と<a href="http://jekyllbootstrap.com/" title="Jekyll-Bootstrap">Jekyll-Bootstrap</a>です。</p>

<h3>Octopress</h3>

<p><a href="http://pages.github.com/" title="GitHub Pages">GitHub Pages</a>その他のホスティングにおいて、最小の労力でブログサイトを構築したいなら、<code>Octopress</code>を選ぶべきです。僅か数ステップで設定が完了し記事を書き始めることができるようになります。各種のPluginも簡単に利用できます。Octopressでブログを構築するのなら、次のサイトが参考になります。</p>

<blockquote><p><a href="http://mattn.kaoriya.net/software/lang/ruby/20111017205717.htm" title="githubとjekyllとoctopressで作る簡単でモダンなブログ">Big Sky :: githubとjekyllとoctopressで作る簡単でモダンなブログ</a></p>

<p><a href="http://tokkonopapa.github.com/blog/2011/12/30/octopress-on-github-and-bitbucket/" title="Octopressのインストールから運用管理まで">Octopressのインストールから運用管理まで - T.I.D.</a></p></blockquote>

<h3>Jekyll-Bootstrap</h3>

<p>Octopressは簡単な一方で、少しお仕着せのところがあり自由度が少なく感じます。自分の好みにあわせてデザインを変更したり、他の人の作ったデザインを適用したりしたい人は、<code>Jekyll-Bootstrap</code>をより気に入ると思います。Octopressよりもデザインテーマのモジュール化が進んでいて、簡単にその切り替えができるように作られています。現状ではまだテーマが少ないですが（http://themes.jekyllbootstrap.com/を参照のこと）、他の人のテーマを参考に、そのいいとこ取りをして自分のテーマを用意することもできます。本家サイトの解説が非常に充実していますので、その使い方は概ねこれで足ります。日本語の解説は次のサイトが参考になります。</p>

<blockquote><p><a href="http://krakenbeal.blogspot.jp/2012/05/ruby-jekyll-jekyll-bootstrap.html" title="ruby と jekyll と jekyll-bootstrap で静的サイトを作る - KRAKENBEAL RECORDS">ruby と jekyll と jekyll-bootstrap で静的サイトを作る - KRAKENBEAL RECORDS</a></p></blockquote>

<h3>jekyll newコマンド</h3>

<p>Jekyll version 1.0より<code>new</code>というサブコマンドが導入されました。これはコマンド一つでブログサイトのひな形を構築するいわゆるscaffoldingを実現します。生成されるひな形にはコメントシステムやソーシャルサービスとの連携機能などはないものの、ブログの基本的要素は既に揃っています。ブログを運用しつつ全体を理解しながら少しづつ独自の改良を加えていく、といった場合には上記フレームワークに頼らないこの方法が最適でしょう。<code>new</code>の使い方については第１１章で触れます。</p>

<h2>２章　Jekyllを知る</h2>

<p>これらのフレームワークは大変便利でJekyllに対する理解がそこそこでも、ブログの運営上大きな支障はありません。しかし、その一方でそのレールから少し外れたことをしようとすると、途端に立ちいかなくなるという問題があります。よくある話です。</p>

<p>本書の目的は、チュートリアルを通してJekyllの概要を理解することです。Jekyllに対する理解が深まれば、上記フレームワークを使った場合でもその運用が楽になるはずです。</p>

<p>チュートリアルでは上記フレームワークを使わずに、Jekyllだけでブログの基礎となるファイル群を１つずつ構築していきます。ここではUnix系OSの使用を前提にしていますので、他OSの場合は適宜読み替えて下さい。Jekyllの対応バージョンは1.0.2です。</p>

<h3>トップページ</h3>

<p><code>gem install jekyll</code>でJekyllを入手したら、ブログを作るディレクトリを用意します。</p>

<div class="highlight"><pre><code class="bash">% mkdir jk
</code></pre></div>


<p>jkディレクトリに移動してトップページを作ります（jkはJekyllの略です）。JekyllではMarkdownが使えるので、index.mdを作ります。Markdownの文法については以下を参考にしてください。</p>

<p><a href="http://blog.2310.net/archives/6" title="blog::2310 » Markdown文法の全訳">blog::2310 » Markdown文法の全訳</a></p>

<div class="highlight"><pre><code class="text">% cd jk
% echo #Welcome to my JK Home Page! &gt; index.md 
</code></pre></div>


<p>そして<code>jekyll build</code>コマンドを実行します。</p>

<div class="highlight"><pre><code class="bash">% jekyll build
</code></pre></div>


<p>（version1.0でサブコマンドが導入されました。）</p>

<p><code>tree</code>します。</p>

<div class="highlight"><pre><code class="bash">% tree
.
├── _site
│   └── index.md
└── index.md

1 directory, 2 files
</code></pre></div>


<p><code>_site</code>というディレクトリ以下にindex.mdがそのままコピーされてしまいました。つまりhtmlに変換されていません。ルートのindex.mdを直しましょう。先頭に<code>---</code>を２本入れます。</p>

<pre><code>---
---
#Welcome to my JK Home Page!
</code></pre>

<p>もう一度<code>jekyll build</code>して<code>tree</code>します。</p>

<div class="highlight"><pre><code class="bash">% jekyll build
% tree
.
├── _site
│   └── index.html
└── index.md

1 directory, 2 files
</code></pre></div>


<p>今度はうまくいきました。Jekyllではこの先頭の<code>---</code>で挟まれた領域を<code>YAML Front-Matter</code>(YAML前付け)といいます。ここにそのドキュメントの書誌事項を書きます。JekyllはYAML Front-Matter付きのドキュメントをその変換の対象とし、それ以外のドキュメントはそのまま_siteディレクトリ以下にコピーするのです。</p>

<p>では結果をブラウザで確認します。次のようにします。</p>

<div class="highlight"><pre><code class="bash">% jekyll serve

Configuration file: none
            Source: /Users/keyes/Google Drive/playground/jk
       Destination: /Users/keyes/Google Drive/playground/jk/_site
      Generating... <span class="k">done</span>.
<span class="o">[</span>2013-05-16 21:48:12<span class="o">]</span> INFO  WEBrick 1.3.1
<span class="o">[</span>2013-05-16 21:48:12<span class="o">]</span> INFO  ruby 2.0.0 <span class="o">(</span>2013-02-24<span class="o">)</span> <span class="o">[</span>x86_64-darwin12.2.0<span class="o">]</span>
<span class="o">[</span>2013-05-16 21:48:12<span class="o">]</span> INFO  WEBrick::HTTPServer#start: <span class="nv">pid</span><span class="o">=</span>11794 <span class="nv">port</span><span class="o">=</span>4000
</code></pre></div>


<p>（version1.0で従来の<code>jekyll --server</code>からserveまたはserverサブコマンドを利用するようになりました。）</p>

<p>4000番ポートでWEBrickが立ち上がりました。http://localhost:4000を開きます。</p>

<p><img src="/assets/images/2013/05/jk/jk01.png" alt="Alt title" /></p>

<p><br clear='all' /></p>

<p><br clear='all' /></p>

<p>うまくいきました。</p>

<h3>レイアウト</h3>

<p>さて、ブラウザでview sourceなどして、ちょっとこのソースを確認してみます。</p>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">&#39;welcome_to_my_jk_home_page&#39;</span><span class="nt">&gt;</span>Welcome to my JK Home Page!<span class="nt">&lt;/h1&gt;</span>
</code></pre></div>


<p>当然ながらHTMLによる構造化レイアウトができていません。早速用意します。</p>

<p>まずはルートに<code>_layouts</code>ディレクトリを作ります。layoutファイルをdefault.htmlとしてここに配置します。</p>

<div class="highlight"><pre><code class="bash">% mkdir _layouts
% touch _layouts/default.html
</code></pre></div>


<p>default.htmlをエディタで開いて、次のような内容にします。</p>

<div class="highlight"><pre><code class="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;title&gt;</span>{{ page.title }}<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  {{ content }}
  <span class="nt">&lt;p&gt;</span>- rendered with layout template -<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</code></pre></div>


<p>html内の<code>{{  }}</code>はLiquidテンプレートによる埋め込み指定です。Jekyllでは<a href="https://github.com/Shopify/liquid" title="Shopify/liquid">Liquid</a>というテンプレートエンジンが使えます。titleでは<code>page.title</code>により対象ページのタイトルを、bodyでは<code>content</code>により対象ページのコンテンツを埋め込むように指定しています。ここではこのlayoutが読み込まれたことを分かるようにするために、<strong>rendered with layout template</strong>という文字を入れました。</p>

<p>再度サーバーを起動して変化を見ます。ここでは<code>--watch</code>オプションを付けて起動してみます。</p>

<div class="highlight"><pre><code class="bash">% jekyll serve --watch
</code></pre></div>


<p>（version1.0では従来の<code>jekyll --auto</code>からserveサブコマンドに--watchオプションを渡すようになりました。）</p>

<p>ブラウザで確認します。
<img src="/assets/images/2013/05/jk/jk01.png" alt="Alt title" /></p>

<p><br clear='all' /></p>

<p>残念ながら変化がありません。</p>

<p>これはindex.mdでどのテンプレートを使うかをちゃんと指定していないからです。ここでYAML Front-Matterの出番です。<code>index.md</code>を次のように直します。</p>

<pre><code>---
layout: default
title: Oh! My JK
---
#Welcome to my JK Home Page!
</code></pre>

<p>ここでは同時にタイトルもセットしました。サーバーはそのままにブラウザをリロードします。</p>

<p><img src="/assets/images/2013/05/jk/jk02.png" alt="Alt title" /></p>

<p><br clear='all' /></p>

<p>今度はうまくいきました。<code>--watch</code>オブション指定により、変更が直ちに反映されました。ソースも見てみます。</p>

<div class="highlight"><pre><code class="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;title&gt;</span>Oh! My JK<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">&#39;welcome_to_my_jk_home_page&#39;</span><span class="nt">&gt;</span>Welcome to my JK Home Page!<span class="nt">&lt;/h1&gt;</span>
  <span class="nt">&lt;p&gt;</span>- rendered with layout template -<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</code></pre></div>


<p>いいですね。</p>

<h2>３章　記事の作成</h2>

<p>さてトップページができたので、記事を書きます。Jekyllでは記事のことを<strong>Post</strong>と呼びます。ルートに<code>_posts</code>ディレクトリを作成し、次のようなファイル名で記事ファイルを作ります。サーバーはそのままに別のターミナルを立ち上げて、以下を実行します。</p>

<div class="highlight"><pre><code class="bash">% mkdir _posts
% touch _posts/2013-05-16-Jekyll-Tutorial.md
</code></pre></div>


<p>エディタで次のようにMarkdownで記事を書きます。Front-Matterを忘れずに。
    ---
    ---
    ##Jekyll Tutorial
    Jekyll is a simple, blog aware, static site generator.</p>

<p><code>jekyll build</code>コマンドを実行してから<code>tree</code>します。</p>

<div class="highlight"><pre><code class="bash">% jekyll build
% tree
.
├── _layouts
│   └── default.html
├── _posts
│   └── 2013-05-16-Jekyll-Tutorial.md
├── _site
│   ├── 2013
│   │   └── 05
│   │       └── 16
│   │           └── Jekyll-Tutorial.html
│   └── index.html
└── index.md

6 directories, 5 files
</code></pre></div>


<p><code>_site</code>ディレクトリ以下に<code>/2013/05/16/Jekyll-Tutorial.html</code>というファイルが生成されたのが分かります。つまり_post以下に生成したファイルのファイル名のうち、その日付部分はファイルパスとして展開されるのです。ブラウザで<code>http://localhost:4000/2013/05/16/Jekyll-Tutorial.html</code>を開いてみましょう。</p>

<p><img src="/assets/images/2013/05/jk/jk03.png" alt="Alt title" /></p>

<p><br clear='all' /></p>

<p>うまくいってるようです。</p>

<h3>Postのレイアウト</h3>

<p>次に記事にも専用のレイアウトを用意します。_layoutsディレクトリ以下に<code>post.html</code>を作って、次のような内容にします。</p>

<div class="highlight"><pre><code class="bash">% touch _layouts/post.html
</code></pre></div>




<div class="highlight"><pre><code class="html">---
layout: default
---
<span class="nt">&lt;header&gt;</span>
  <span class="nt">&lt;div&gt;</span>{{ page.date | date_to_string }}<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;h1&gt;</span>{{ page.title }}<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;/header&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&#39;main&#39;</span><span class="nt">&gt;</span>
  {{ content }}
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;footer&gt;</span>
  <span class="nt">&lt;p&gt;</span>- rendered with post template -<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/footer&gt;</span>
</code></pre></div>


<p>Front-Matterでdefault.htmlを読み込むようにします。これによりpost.htmlはdefault.htmlのサブテンプレートになります。header部分に投稿日とタイトルを表示するようLiquidで指定します。</p>

<p>なお、<code>{{ page.date | date_to_string }}</code>はJekyllで拡張されたLiquidのフィルターという機能を使って、出力の整形を行なっています(<a href="http://jekyllrb.com/docs/templates/" title="Templates">Templates</a>)。default.htmlと同様に、このテンプレートが読み込まれたことを見るために<strong>rendered with post template</strong>を追加しておきます。</p>

<p>そして記事側(/2013-05-16-Jekyll-Tutorial.md)でこのテンプレートを読めるように、そのFront-Matterを記述します。</p>

<pre><code>---
layout: post
---
Jekyll is a simple, blog aware, static site generator.
</code></pre>

<p>タイトルはテンプレート側で用意するようにしたので、ここでは消します。</p>

<p>サーバーを再起動して変化を見ます。</p>

<div class="highlight"><pre><code class="bash">% jekyll serve --watch
</code></pre></div>


<p><img src="/assets/images/2013/05/jk/jk04.png" alt="Alt title" /></p>

<p><br clear='all' /></p>

<p>ソースも見ます。</p>

<div class="highlight"><pre><code class="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;title&gt;</span>Jekyll Tutorial<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;header&gt;</span>
    <span class="nt">&lt;div&gt;</span>16 May 2013<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Jekyll Tutorial<span class="nt">&lt;/h1&gt;</span>
  <span class="nt">&lt;/header&gt;</span>
  
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&#39;main&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p&gt;</span>Jekyll is a simple, blog aware, static site generator.<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  
  <span class="nt">&lt;footer&gt;</span>
    <span class="nt">&lt;p&gt;</span>- rendered with post template -<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/footer&gt;</span>
    <span class="nt">&lt;p&gt;</span>- rendered with layout template -<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</code></pre></div>


<p>うまくテンプレートが読み込まれました。</p>

<h2>４章　デフォルト設定の変更</h2>

<p>前のソースにおいてはファイル名から<strong>Jekyll Tutorial</strong>というタイトルが自動的にセットされていることが分かります。Front-Matterを使って、タイトルとついでに投稿日も変えてみましょう。<code>_posts/2013-05-16-Jekyll-Tutorial.md</code>を修正します。</p>

<pre><code>---
layout: post
title: Jekyllのチュートリアル
date: 2013-05-17
---
Jekyll is a simple, blog aware, static site generator.
</code></pre>

<p>日付を変えたので<strong>http://localhost:4000/2013/05/17/Jekyll-Tutorial.html</strong>にアクセスします。</p>

<p><img src="/assets/images/2013/05/jk/jk05.png" alt="Alt title" /></p>

<p><br clear='all' /></p>

<p>投稿日とタイトルが変わりました。つまりYAML Front-Matterの記述によってデフォルトの設定が上書きされました。この場合、元のMarkdownファイルのファイル名における日付と、パスの日付が一致しなくなる点注意が必要です。</p>

<h3>_config.ymlによる設定</h3>

<p>個別ページの設定はそのFront-Matterで行うということが分かりました。では全体的な設定はどこでするのでしょうか。それはルートに_config.ymlというファイルを用意して、そこで行います。試しに記事のパス形式を変えてみます。ここではサーバーの再起動が必要です。</p>

<pre><code>% echo permalink: /:categories/:year-:month-:day/:title &gt; _config.yml
% jekyll build
% tree
.
├── _config.yml
├── _layouts
│   ├── default.html
│   └── post.html
├── _posts
│   └── 2013-05-16-Jekyll-Tutorial.md
├── _site
│   ├── 2013-05-17
│   │   └── Jekyll-Tutorial
│   │       └── index.html
│   └── index.html
└── index.md

5 directories, 7 files
</code></pre>

<p><code>_site</code>ディレクトリを見てわかるように、記事のパスが変わりました。</p>

<p>更に、記事にカテゴリーを付けてみます。ここでは<code>_posts/2013-05-16-Jekyll-Tutorial.md</code>を<strong>blog</strong>,<strong>technology</strong>カテゴリーに属するよう設定します。記事ファイルを開いてそのFront-matterにcategories設定を追加します。</p>

<pre><code>---
layout: post
title: Jekyllのチュートリアル
date: 2013-05-17
categories: blog technology     &lt;-- ここを追加
---
Jekyll is a simple, blog aware, static site generator.
</code></pre>

<p>再度ビルドします。</p>

<pre><code>% jekyll build
% tree
.
├── _config.yml
├── _layouts
│   ├── default.html
│   └── post.html
├── _posts
│   └── 2013-05-16-Jekyll-Tutorial.md
├── _site
│   ├── blog
│   │   └── technology
│   │       └── 2013-05-17
│   │           └── Jekyll-Tutorial
│   │               └── index.html
│   └── index.html
└── index.md

5 directories, 7 files
</code></pre>

<p>_siteディレクトリを見ると、記事が/blog/technology/パス以下に配置されているのが確認できます。先に進む前にcategories設定は削除しておいて下さい。</p>

<h2>５章　CSSによるスタイル設定</h2>

<p>さて、そろそろCSSによるスタイル設定をします。説明の最初でYAML Front-Matterを含まないファイルはそのまま_siteディレクトリにコピーされると説明しましたが、CSSファイルはそのようにして配置されるファイルの一つです。ここではassets/cssというディレクトリをルートに作って、単純なCSS定義をした<code>style.css</code>というファイルを用意します。</p>

<div class="highlight"><pre><code class="bash">% mkdir -p assets/css
% touch assets/css/style.css
</code></pre></div>




<div class="highlight"><pre><code class="css"><span class="nt">body</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="m">#dee</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">h1</span> <span class="p">{</span>
  <span class="k">color</span><span class="o">:</span> <span class="m">#11d</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">h2</span> <span class="p">{</span>
  <span class="k">color</span><span class="o">:</span> <span class="m">#161</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">header</span> <span class="p">{</span>
  <span class="k">border-bottom</span><span class="o">:</span> <span class="m">10px</span> <span class="k">solid</span> <span class="m">#a33</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">footer</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="m">#a33</span><span class="p">;</span>
  <span class="k">color</span><span class="o">:</span> <span class="m">#fff</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>


<p><code>_layouts/default.html</code>でstyle.cssを読み込むようにします。</p>

<div class="highlight"><pre><code class="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;title&gt;</span>{{ page.title }}<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;/assets/css/style.css&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span> //ここを追加
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  {{ content }}
  <span class="nt">&lt;p&gt;</span>- rendered with layout template -<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</code></pre></div>


<p>ブラウザで見てみます。まずはトップページ（http://localhost:4000/）にアクセスします。</p>

<p><img src="/assets/images/2013/05/jk/jk06.png" alt="Alt title" /></p>

<p><br clear='all' /></p>

<p>次に、記事のページ（http://localhost:4000/2013-05-17/Jekyll-Tutorial/）にもアクセスします。</p>

<p><img src="/assets/images/2013/05/jk/jk07.png" alt="Alt title" /></p>

<p><br clear='all' /></p>

<p>うまく適用されているようです。</p>

<h2>６章　グローバル変数「site」</h2>

<p>Jekyllでは生成されたサイトに対する情報は、グローバル変数siteを通してアクセスできます。siteがどんな情報を持っているか、ちょっと見てみます。<code>index.md</code>に戻って、次の一行を追加します。</p>

<pre><code>---
layout: default
title: Oh! My JK
---
#Welcome to my JK Home Page!

{{ site }}  &lt;!-- ここを追加 --&gt;
</code></pre>

<p>ブラウザで見てみます。</p>

<p><img src="/assets/images/2013/05/jk/jk08.png" alt="Alt title" />
<br clear='all' /></p>

<p><code>site</code>で読みだし可能な設定情報が表示されました。情報はHash形式で記録されていますが、これら情報へのアクセスはメソッド呼び出しのようにドットチェーンで行えます。幾つか見てみます。index.mdを書き換えます。</p>

<pre><code>---
layout: default
title: Oh! My JK
---
#Welcome to my JK Home Page!

port: {{ site.port }}

markdown: {{ site.markdown }}

permalink: {{ site.permalink }}

{{ site }}
</code></pre>

<p>アクセスします。</p>

<p><img src="/assets/images/2013/05/jk/jk09.png" alt="Alt title" />
<br clear='all' /></p>

<p>.(ドット)でアクセスできました。このうちpermalinkは_config.ymlでセットしたデータでした。_config.ymlに別の設定を追加して読み出せるか試してみます。</p>

<div class="highlight"><pre><code class="yaml"><span class="l-Scalar-Plain">permalink</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/:categories/:year-:month-:day/:title</span>
<span class="l-Scalar-Plain">author</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Charlie</span>
  <span class="l-Scalar-Plain">email</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">charlie@gmail.com</span>

<span class="l-Scalar-Plain">markdown</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">rdiscount</span>
</code></pre></div>


<p>Markdownにrdiscountを使うように設定したので、<code>gem install rdiscount</code>する必要があるかも知れません。</p>

<p>index.mdにauthorに関する事項を追記します。</p>

<pre><code>---
layout: default
title: Oh! My JK
---
#Welcome to my JK Home Page!

port: {{ site.port }}

markdown: {{ site.markdown }}

permalink: {{ site.permalink }}

{{ site }}

**Copyright © {{ site.author.name }} 2013 All rights reserved. Please contact to {{ site.author.email }}.**
</code></pre>

<p>サーバーを再起動してからアクセスします。</p>

<p><img src="/assets/images/2013/05/jk/jk10.png" alt="Alt title" />
<br clear='all' /></p>

<p>Copyrightの注意書きでnameとemailのメソッドチェーンが出来ています。</p>

<h2>７章　Liquid制御構文</h2>

<p>変数<strong>site</strong>からは<code>posts</code>を介してPostに関する情報にもアクセスできます。Liquidテンプレートでは<strong>if</strong>, <strong>case</strong>, <strong>for</strong>などの制御構文が使えるので、これを使って各Postの内容を読みだしてみます。</p>

<p>その前に記事をもう一つ増やしておきます。</p>

<div class="highlight"><pre><code class="bash">% touch _posts/2013-05-18-Ruby-is-Great.md
</code></pre></div>


<p>エディタで記事を書きます。</p>

<pre><code>---
layout: post
title: Rubyは最高
tags: [ruby, language]
---
##Rubyとは
Rubyは、手軽なオブジェクト指向プログラミングを実現するための種々の機能を持つオブジェクト指向スクリプト言語です。
</code></pre>

<p>そしてindex.mdを次のようにします。</p>

<pre><code>---
layout: default
title: Oh! My JK
---
#Welcome to my JK Home Page!

&lt;!-- 以下を追加 --&gt;
&lt;ul&gt;
{% for post in site.posts %}
  &lt;li&gt;
    &lt;a href="{{ post.url }}"&gt;{{ post.date | date_to_long_string }} : {{ post.title }}&lt;/a&gt;
  &lt;/li&gt;
{% endfor %}
&lt;/ul&gt;
&lt;!--  --&gt;

port: {{ site.port }}

markdown: {{ site.markdown }}

permalink: {{ site.permalink }}

{{ site }}

**Copyright © {{ site.author.name }} 2013 All rights reserved. Please contact to {{ site.author.email }}.**
</code></pre>

<p><code>for post in site.posts</code>でpostオブジェクトをイテレートして、<strong>url</strong>, <strong>date</strong>, <strong>title</strong>の各要素を読み出し、リンクを生成します。</p>

<p>ブラウザで見てみます。</p>

<p><img src="/assets/images/2013/05/jk/jk13.png" alt="Alt title" />
<br clear='all' /></p>

<p>クリックしてみます。</p>

<p><img src="/assets/images/2013/05/jk/jk14.png" alt="Alt title" />
<br clear='all' /></p>

<p>いいですね。</p>

<h3>記事の引用</h3>

<p>一歩進んで、version1.0で導入された<code>excerpt</code>という機能を使って、記事の引用を見出しとともに表示させてみましょう。</p>

<p>index.mdを修正します。</p>

<pre><code>---
layout: default
title: Oh! My JK
---
#Welcome to my JK Home Page!

&lt;ul&gt;
{% for post in site.posts %}
  &lt;li&gt;
    &lt;a href="{{ post.url }}"&gt;{{ post.date | date_to_long_string }} : {{ post.title }}&lt;/a&gt;
    &lt;p&gt;{{ post.excerpt }}&lt;/p&gt;  &lt;!-- ここを追加 --&gt;
  &lt;/li&gt;
{% endfor %}
&lt;/ul&gt;

port: {{ site.port }}

markdown: {{ site.markdown }}

permalink: {{ site.permalink }}

{{ site }}

**Copyright © {{ site.author.name }} 2013 All rights reserved. Please contact to {{ site.author.email }}.**
</code></pre>

<p>ブラウザで見てみます。</p>

<p><img src="/assets/images/2013/05/jk/jk17.png" alt="Alt title" />
<br clear='all' /></p>

<p>自動で記事の最初の行が引用として読み出されました。</p>

<p>Rubyの記事がタイトルが含まれた見づらいものになってしまったので、手動で設定してみます。記事のFront-matterに<code>excerpt</code>属性をセットします。</p>

<pre><code>---
layout: post
title: Rubyは最高
tags: [ruby, language]
excerpt: A dynamic, open source programming language with a focus on simplicity and productivity.
---
##Rubyとは
Rubyは、手軽なオブジェクト指向プログラミングを実現するための種々の機能を持つオブジェクト指向スクリプト言語です。
</code></pre>

<p><img src="/assets/images/2013/05/jk/jk19.png" alt="Alt title" />
<br clear='all' /></p>

<p>手動設定した引用が表示されました。</p>

<h2>８章　グローバル変数「page」</h2>

<p>変数siteはサイト全体の情報を持ったオブジェクトでした。一方で、個々のページの情報はグローバル変数pageが持っています。同様に<code>index.md</code>で読みだしてみます。</p>

<pre><code>---
layout: default
title: Oh! My JK
---
#Welcome to my JK Home Page!

port: {{ site.port }}

markdown: {{ site.markdown }}

permalink: {{ site.permalink }}

&lt;!-- {{ site }} --&gt;

**Copyright © {{ site.author.name }} 2013 All rights reserved. Please contact to {{ site.author.email }}.**

{{ page }} &lt;!-- ここを追加 --&gt;
</code></pre>

<p><img src="/assets/images/2013/05/jk/jk11.png" alt="Alt title" />
<br clear='all' /></p>

<p>トップページにアクセスすると変数<code>page</code>は、<strong>layout</strong>, <strong>url</strong>, <strong>content</strong>, <strong>path</strong>の各要素を持っていることが分かります。</p>

<p>同じことを記事のページ(Post)でもしてみます。<code>_posts/2013-05-18-Ruby-is-Great.md</code>に追加します。</p>

<pre><code>---
layout: post
title: Rubyは最高
tags: [ruby, language]
---
##Rubyとは
Rubyは、手軽なオブジェクト指向プログラミングを実現するための種々の機能を持つオブジェクト指向スクリプト言語です。

{{ page }} &lt;!-- ここを追加 --&gt;
</code></pre>

<p>アクセスします。</p>

<p><img src="/assets/images/2013/05/jk/jk12.png" alt="Alt title" />
<br clear='all' /></p>

<p>Postでは、<strong>layout</strong>, <strong>title</strong>, <strong>tags</strong>, <strong>url</strong>, <strong>date</strong>, <strong>id</strong>, <strong>categories</strong>, <strong>next</strong>, <strong>previous</strong>, <strong>content</strong>, <strong>path</strong>の各情報にアクセスできることが分かります。</p>

<h2>９章　Liquidによるシンタックスハイライト</h2>

<p>さて、次にRubyの記事にプログラムコードを書いてみます。JekyllではLiquidタグを利用することによって、<a href="http://pygments.org/" title="Pygments — Python syntax highlighter">Pygments</a>によるシンタックスハイライト（Syntax Highlighting）が可能です（version1.0でPygmentsは組み込みとなり別途インストールが不要となったようです）。</p>

<p>次のコマンドを実行して<code>syntax.css</code>を生成します。</p>

<div class="highlight"><pre><code class="bash">% pygmentize -S default -f html &gt; assets/css/syntax.css
</code></pre></div>


<p>pygmentizeが利用できない場合は以下のサイトなどから取得出来ます（後述するjekyll newでもsyntax.cssが得られます）。</p>

<p><a href="https://github.com/mojombo/tpw/blob/master/css/syntax.css" title="tpw/css/syntax.css at master · mojombo/tpw · GitHub">tpw/css/syntax.css at master · mojombo/tpw · GitHub</a></p>

<p>_layouts/default.htmlでこれを読み込めるようにします。</p>

<div class="highlight"><pre><code class="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;title&gt;</span>{{ page.title }}<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;/assets/css/style.css&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;/assets/css/syntax.css&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span> //ここを追加
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  {{ content }}
  <span class="nt">&lt;p&gt;</span>- rendered with layout template -<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</code></pre></div>


<p>準備ができました（version1.0ではpygmentsの_config.ymlへの設定は不要になったようです）。<code>_posts/2013-05-18-Ruby-is-Great.md</code>にRubyのコードを書きます。コードは{% highlight ruby %}と{% endhighlight %}というタグで囲みます。</p>

<pre><code>---
layout: post
title: Rubyは最高
tags: [ruby, language]
---
##Rubyとは
Rubyは、手軽なオブジェクト指向プログラミングを実現するための種々の機能を持つオブジェクト指向スクリプト言語です。

##Try Ruby
{% highlight ruby linenos %}
class Person
  def initialize(name)
    @name = name
  end

  def hello
    "Hello, friend!\nMy name is #{@name}!"
  end
end

charlie = Person.new('Charlie')
puts charlie.hello

# &gt;&gt; Hello, friend!
# &gt;&gt; My name is Charlie!
{% endhighlight %}


{{ page }}
</code></pre>

<p>サーバーを再起動してブラウザで確認します。</p>

<p><img src="/assets/images/2013/05/jk/jk15.png" alt="Alt title" />
<br clear='all' /></p>

<h3>gistタグ</h3>

<p>gistタグを使って、シンタックスハイライトされた「<a href="https://gist.github.com/" title="Gists">Gists（コードスニペットサービス）</a>」のコードを貼り付けることも可能です（version1.0でgist pluginが組み込みになりました）。</p>

<p>Rubyの記事でgistタグを使ってみます。</p>

<pre><code>---
layout: post
title: Rubyは最高
tags: [ruby, language]
---
##Rubyとは
Rubyは、手軽なオブジェクト指向プログラミングを実現するための種々の機能を持つオブジェクト指向スクリプト言語です。

{% gist 5598133 creature.rb %}  &lt;-- ここを追加

##Try Ruby
{% highlight ruby linenos %}
class Person
  def initialize(name)
    @name = name
  end

  def hello
    "Hello, friend!\nMy name is #{@name}!"
  end
end

charlie = Person.new('Charlie')
puts charlie.hello

# &gt;&gt; Hello, friend!
# &gt;&gt; My name is Charlie!
{% endhighlight %}


{{ page }}
</code></pre>

<p>結果を見てみます。</p>

<p><img src="/assets/images/2013/05/jk/jk20.png" alt="Alt title" />
<br clear='all' /></p>

<p>Gistsにアップロードしておいたコードが貼り付けられました。</p>

<h2>１０章　プラグイン</h2>

<p>Jekyllはプラグインによりその変換機能を拡張できます<sup id='fnref:3'><a href='#fn:3' rel='footnote'>3</a></sup>。プラグインには<strong>Generator</strong>, <strong>Converter</strong>, <strong>Tag</strong>という３種類があります。詳細については次を参照してください。</p>

<blockquote><p><a href="http://jekyllrb.com/docs/plugins/" title="Plugins">Plugins（英語）</a></p>

<p><a href="http://melborne.github.io/2012/05/09/translation-of-jekyll-plugins/" title="Jekyll Wiki Pluginsの説明ページを勝手に翻訳しました">Jekyll Wiki Pluginsの説明ページを勝手に翻訳しました（version0.11における日本語訳）</a></p></blockquote>

<p>シンタックスハイライトに係るプラグインについて前章で説明しましたが、ここでは<script type="math/tex">\TeX</script>による数式を貼り付ける<a href="https://gist.github.com/834610" title="MathJax">MathJax.rb</a>というTagプラグインを使ってみます（version1.0ではMarukuがサポートするLaTeXをpngにレンダリングする方法を使うこともできるようです。<a href="http://jekyllrb.com/docs/extras/" title="Extras">Extras</a>）。</p>

<p><code>MathJax.rb</code>はブラウザ上で<script type="math/tex">\TeX</script>を表示できるようにする<a href="http://www.mathjax.org/" title="www.mathjax.org">MathJax.js</a>に対応したプラグインです。</p>

<p>ルートに<code>_plugins/</code>ディレクトリを生成し、リンク先から<code>MathJax.rb</code>をダウンロードして配置します。</p>

<blockquote><p><a href="https://gist.github.com/834610">MathJax.rb</a></p></blockquote>

<div class="highlight"><pre><code class="bash">% mkdir _plugins
% mv ~/Downloads/MathJax.rb _plugins/mathjax.rb
</code></pre></div>


<p>_layouts/default.htmlで<code>MAthJax.js</code>を読み込めるようにします。</p>

<div class="highlight"><pre><code class="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;title&gt;</span>{{ page.title }}<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;/assets/css/style.css&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;/assets/css/syntax.css&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>  <span class="c">&lt;!-- ここを追加 --&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  {{ content }}
  <span class="nt">&lt;p&gt;</span>- rendered with layout template -<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</code></pre></div>


<p>準備ができたので、<code>_posts/2013-05-16-Jekyll-Tutorial.md</code>に数式を追加します。</p>

<pre><code>{% math %}
Formular\ from Wikipedia\\

\int_0^3 9x^2 + 2x + 4\, dx = 3x^3 + x^2 + 4x + C \Big\rbrack_0^3 = 102\\

e^{x+iy} = e^x(\cos y + i\sin y)\\

x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}
{% endmath %}
</code></pre>

<p>サーバーを再起動してブラウザで確認します。</p>

<p><img src="/assets/images/2013/05/jk/jk16.png" alt="Alt title" />
<br clear='all' /></p>

<p>きれいな数式が表示されました。</p>

<h2>１１章　その他の機能</h2>

<p>バージョン1.0で新たに追加された機能のいくつかについて簡単に書いておきます。</p>

<h2>ブログのひな形</h2>

<p><code>jekyll new</code>サブコマンドにより、簡単にブログのひな形が作れるようになりました。</p>

<p>ブログを構築する別のフォルダに移動して試してみます。</p>

<div class="highlight"><pre><code class="bash">% jekyll new myblog
New jekyll site installed in /myblog.
% <span class="nb">cd </span>myblog
% tree
.
├── _config.yml
├── _layouts
│   ├── default.html
│   └── post.html
├── _posts
│   └── 2013-05-17-welcome-to-jekyll.markdown
├── css
│   ├── main.css
│   └── syntax.css
└── index.html

3 directories, 7 files
</code></pre></div>


<p>サーバーを起動してアクセスしてみます。</p>

<div class="highlight"><pre><code class="bash">% jekyll serve
</code></pre></div>


<p>トップページです。</p>

<p><img src="/assets/images/2013/05/jk/jk22.png" alt="Alt title" />
<br clear='all' /></p>

<p>１件記事が既に書かれているので開いてみます。</p>

<p><img src="/assets/images/2013/05/jk/jk23.png" alt="Alt title" />
<br clear='all' /></p>

<p>シンプルですがこのまま使えるくらいのひな形が出力されました。</p>

<h2>下書き</h2>

<p><strong>_drafts</strong>フォルダ内に配置したファイルはjekyll buildによるコンパイル対象にはなりませんが、jekyll serveに<code>--dratfs</code>オプションを付けることでプレビューできるようになります。</p>

<p>チュートリアルのフォルダに戻って試してみます。</p>

<p>_draftsフォルダを作り、下書きファイルをタイトルのみのファイル名で用意します。</p>

<div class="highlight"><pre><code class="bash">% mkdir _drafts
% touch _drafts/ruby_trivias.md
</code></pre></div>


<p>ファイルを開き下書きをします。</p>

<pre><code>---
layout: post
title: Rubyのトリビア
---
Rubyのトリビアを紹介します。
</code></pre>

<p>jekyll serveコマンドに--draftsオプションを付けてサーバーを起動します。</p>

<div class="highlight"><pre><code class="bash">% jekyll serve --drafts
</code></pre></div>


<p>本日が2013/5/17だとして、<code>http://localhost:4000/2013-05-17/ruby_trivias/</code>にアクセスしてみます。</p>

<p><img src="/assets/images/2013/05/jk/jk21.png" alt="Alt title" />
<br clear='all' /></p>

<p>投稿日未定の記事を書くときなど便利に使えそうです。</p>

<p><a href="http://jekyllrb.com/docs/upgrading/" title="Upgrading">draftについてのドキュメント</a></p>

<h2>ページネーション</h2>

<p><strong>_config.yml</strong>で<code>paginate</code>属性をセットすることで、グローバル変数「<strong>paginator</strong>」が有効になりページネーションが利用できるようになります。トップページで記事のリストを複数頁に分けるなどの目的で活用できるでしょう。ただ現状、paginatorへのアクセスはhtmlファイル内限定、ナビゲーションのためのコードが冗長などの制約があります。</p>

<p><a href="http://jekyllrb.com/docs/pagination/" title="Pagination">Paginationについてのドキュメント</a></p>

<h2>他のブログからの移管</h2>

<p>WordPressなどの他のブログシステムからJekyllへのデータの移管を支援する機能が提供されています。ブログシステム毎に異なるこの機能は<code>jekyll-import</code>というgemにまとめられていて、旧データベースにアクセスしてJekyllのためのmarkdown形式の記事を生成します。詳細は以下を参照して下さい。</p>

<p><a href="http://jekyllrb.com/docs/migrations/" title="Blog migrations">Blog migrationsについてのドキュメント</a></p>

<h2>１２章　まとめ</h2>

<p>チュートリアルは以上です。</p>

<p>最後にここに記述したJekyllの機能をまとめておきます。</p>

<ol>
<li><p><code>jekyll build</code>コマンドは<code>_site</code>ディレクトリ以下に変換ファイルを生成する。</p></li>
<li><p>YAML Front-Matter付きのファイルはその設定に従い変換され、YAML Front-Matter無しのファイルはそのままコピーされる。</p></li>
<li><p>ページごとの設定はそのYAML Front-Matterで行い、サイト全体の設定は_config.ymlで行う。</p></li>
<li><p>記事ファイルは<code>:year-:month-:day-:title</code>のフォーマットで、_postsディレクトリ以下に配置する。</p></li>
<li><p>レイアウトファイルは_layoutディレクトリ以下に配置する。</p></li>
<li><p>サイト情報にはグローバル変数<code>site</code>でアクセスできる。</p></li>
<li><p>ページ情報にはグローバル変数<code>page</code>でアクセスできる。</p></li>
<li><p>Liquidテンプレート<code>{{ }}</code>または<code>{% %}</code>を使ってサイトまたはページオブジェクトの埋め込みができる。</p></li>
<li><p><code>_plugins</code>ディレクトリ以下にPlugin Scriptを配置することにより、機能拡張が可能である。</p></li>
<li><p><code>jekyll new</code>コマンドでブログのひな形が生成できる。</p></li>
</ol>


<hr />

<p><img src="/assets/images/2013/05/jk/jekyll_cover.png" alt="Alt title" /></p>

<p><a href="http://gum.co/xfJY" class="gumroad-button">電子書籍「30分のチュートリアルでJekyllを理解する」EPUB/MOBI版</a><script type="text/javascript" src="https://gumroad.com/js/gumroad.js"></script></p>

<p>このリンクはGumroadにおける商品購入リンクになっています。クリックすると、オーバーレイ・ウインドウが立ち上がって、この場でクレジットカード決済による購入が可能です。購入にはクレジット情報およびメールアドレスの入力が必要になります。購入すると、入力したメールアドレスにコンテンツのDLリンクが送られてきます。</p>

<hr />

<p style='color:red'>=== Ruby関連電子書籍100円で好評発売中！ ===</p>


<p><a href="/books/" title="M'ELBORNE BOOKS">M'ELBORNE BOOKS</a></p>

<p><a href="/books/">
  <img src="/assets/images/2012/start_ruby.jpg" alt="start_ruby" style="width:200px" />
</a>
<a href="/books/">
  <img src="/assets/images/2013/04/ruby_tutorial_cover.png" alt="ruby_tutorial" style="width:200px" />
</a>
<a href="/books/">
  <img src="/assets/images/2012/ruby_parallel_cover.png" alt="ruby_parallel" style="width:200px" />
</a></p>

<hr />

<div class="footnotes">
    <ol>
        <li id='fn:1'>Github Page上でpluginを利用するためローカルでビルドしています。 <a href='#fnref:1' rev='footnote'>↩</a></li><li id='fn:2'>Gumroadでの最低販売価格が99¢であり、円安により100円での販売ができなくなってしまいました。 <a href='#fnref:2' rev='footnote'>↩</a></li><li id='fn:3'>Github Pageでpluginを利用するためにはちょっとした工夫が必要になります。 <a href='#fnref:3' rev='footnote'>↩</a></li>
    </ol>
</div>





    <div class="ad" id="topAdsense">
      <script type="text/javascript"><!--
      google_ad_client = "ca-pub-8790567277062819";
      /* foot */
      google_ad_slot = "7511276945";
      google_ad_width = 728;
      google_ad_height = 90;
      //-->
      </script>
      <script type="text/javascript"
      src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script>
    </div>

    <hr>
    <ul class="social_button inline">
      <li id="hatena">
  <a href="http://b.hatena.ne.jp/entry/http://melborne.github.io/2013/05/20/now-the-time-to-start-jekyll/" class="hatena-bookmark-button" data-hatena-bookmark-title="Jekyllいつやるの？ジキやルの？今でしょ！" data-hatena-bookmark-layout="horizontal" title="このエントリーをはてなブックマークに追加"><img src="http://b.st-hatena.com/images/entry-button/button-only.gif" alt="このエントリーをはてなブックマークに追加" width="20" height="30" style="border: none;" /></a><script type="text/javascript" src="http://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
</li>

<li id="twitter">
  <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://melborne.github.io/2013/05/20/now-the-time-to-start-jekyll/" data-text="Jekyllいつやるの？ジキやルの？今でしょ！" data-via="merborne" data-lang="ja" data-size="" data-count="horizontal"></a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</li>

<li id="google">
  <link rel="canonical" href="http://melborne.github.io/2013/05/20/now-the-time-to-start-jekyll/" />
  <g:plusone size="medium"></g:plusone>
  
  <script type="text/javascript">
    window.___gcfg = {lang: 'ja'};
  
    (function() {
      var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      po.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
  </script>
</li>

<li id="facebook">
  <div class="fb-like" data-href="http://melborne.github.io/2013/05/20/now-the-time-to-start-jekyll/" data-layout="button_count" data-send="false" data-width="150" data-show-faces="false"></div>
</li>

<li></li>




    </ul>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/2013/05/15/color-handler-colorable-gem-updated" title="Rubyで色を扱うライブラリ「Colorable」をアップデートしましたのでお知らせいたします">&larr; Previous</a></li>
      
        <li><a href="/">Archive</a></li>
        <!--<li><a href="/archive.html">Archive</a></li>-->
      
        <li class="next"><a href="/2013/06/03/i-create-kindle-case" title="僕にもできた！フェルトで作るKindleケース">Next &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'melborne'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




  </div>
  
  <div class="span3">
    <div id="bookAd">
      <a href="/books/">
        <!--<img src="/assets/images/2012/start_ruby.jpg" alt="start_ruby" />-->
        <!--<img src="/assets/images/2012/jekyll_cover.jpg" alt="jekyll" />-->
        <!--<img src="/assets/images/2012/ruby_parallel_cover.png" alt="ruby_parallel" />-->
        <!--<img src="/assets/images/2012/js_oop_cover.png" alt="js_oop" />-->
        <!--<img src="/assets/images/2012/rack_cover.png" alt="rack" />-->
        <!--<img src="/assets/images/2013/02/ruby_object_cover.png" alt="ruby_object" />-->
        <!--<img src="/assets/images/2013/03/ruby_trivia_cover.png" alt="ruby_trivia" />-->
        <img src="/assets/images/books/ruby_pack8.png" alt="ruby_pack8" style="width:200px" />
      </a>
      <p id="comment">100円〜で好評発売中！<br/><a href="/books/">M'ELBORNE BOOKS</a></p>
    </div>

    <hr />
    

    <ul class="social_button inline">
      <li id="hatena">
  <a href="http://b.hatena.ne.jp/entry/http://melborne.github.io/2013/05/20/now-the-time-to-start-jekyll/" class="hatena-bookmark-button" data-hatena-bookmark-title="Jekyllいつやるの？ジキやルの？今でしょ！" data-hatena-bookmark-layout="horizontal" title="このエントリーをはてなブックマークに追加"><img src="http://b.st-hatena.com/images/entry-button/button-only.gif" alt="このエントリーをはてなブックマークに追加" width="20" height="30" style="border: none;" /></a><script type="text/javascript" src="http://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
</li>

<li id="twitter">
  <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://melborne.github.io/2013/05/20/now-the-time-to-start-jekyll/" data-text="Jekyllいつやるの？ジキやルの？今でしょ！" data-via="merborne" data-lang="ja" data-size="" data-count="horizontal"></a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</li>

<li id="google">
  <link rel="canonical" href="http://melborne.github.io/2013/05/20/now-the-time-to-start-jekyll/" />
  <g:plusone size="medium"></g:plusone>
  
  <script type="text/javascript">
    window.___gcfg = {lang: 'ja'};
  
    (function() {
      var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      po.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
  </script>
</li>

<li id="facebook">
  <div class="fb-like" data-href="http://melborne.github.io/2013/05/20/now-the-time-to-start-jekyll/" data-layout="button_count" data-send="false" data-width="150" data-show-faces="false"></div>
</li>

<li></li>




    </ul>

    <div class="ad" id="sideAdsense">
      <script type="text/javascript"><!--
      google_ad_client = "ca-pub-8790567277062819";
      /* sidebar */
      google_ad_slot = "0672114662";
      google_ad_width = 160;
      google_ad_height = 600;
      //-->
      </script>
      <script type="text/javascript"
      src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script>
    </div>
  </div>
</div>


      </div>

      <footer>
        <p><a rel="license" href="http://creativecommons.org/licenses/by-nc/2.1/jp/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc/2.1/jp/88x31.png" /></a>  kyoendo 2012 
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>        </p>
      </footer>

    </div> <!-- /container -->

    

    <script type="text/javascript">
      if (location.hostname != 'localhost') {
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-288751-18']);
        _gaq.push(['_trackPageview']);
  
        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
      };
    </script>

    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/ja_JP/all.js#xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>

    <script src="/assets/javascripts/jquery-1.7.2.min.js"></script>
    <script src="/assets/javascripts/lightbox.js"></script>

    <script type="text/javascript" src="https://gumroad.com/js/gumroad.js"></script>
  </body>
</html>

