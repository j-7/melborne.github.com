
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    
      <title>ピクミンがGraphvizにやって来た！</title>
    
    <meta name="description" content="" />
    <meta name="author" content="kyoendo" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter-ext/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="/assets/themes/twitter-ext/css/style.css?body=1" rel="stylesheet" type="text/css" media="all" />
    <link href="/assets/themes/twitter-ext/css/syntax.css" rel="stylesheet" type="text/css" />
    <link href="/assets/themes/twitter-ext/css/lightbox.css" rel="stylesheet" />
    <link media="only screen and (max-device-width: 480px)" href="/assets/themes/twitter-ext/css/iphone.css" type="text/css" rel="stylesheet" />
    <!--<link media="only screen and (device-width: 768px)" href="/assets/themes/twitter-ext/css/ipad.css" type="text/css" rel="stylesheet" />-->
    <!--<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />-->
    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico" />
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png" />-->
<!--<script type="text/x-mathjax-config">-->
  <!--MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ["\\(","\\)"]] } });-->
<!--</script>-->
<!--<script type="text/javascript"-->
  <!--src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">-->
<!--</script>-->
  </head>
  <body>
    <div id="fb-root"></div>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="avatar" href="/">
            <img src="http://gravatar.com/avatar/97aa01a6f87da85251be77792dec1d9c?s=80" height="75" width="75" class="avatar" />
          </a>
          <a class="brand" href="/">hp12c</a>
          <div id='rss'>
            <!--<a href="http://feeds.feedburner.com/github/melborne" title="Subscribe to my feed" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon32x32.png" alt="" style="border:0"/></a><a href="http://feeds.feedburner.com/github/melborne" title="Subscribe to my feed" rel="alternate" type="application/rss+xml"></a>-->
            <a href="/atom.xml" id="rss">
              <img src="/assets/images/site/rss.png" alt="rss" title="RSS" height="22" width="22" />
            </a>
          </div>
          <ul class="nav">
            <li>
              <a class="books" href="/books/">Books</a>
            </li>
            <li>
              <a class="mygems" href="https://rubygems.org/profiles/melborne/">Gems</a>
            </li>
            <li>
              <a class="myproducts" href="http://welove.herokuapp.com/users/54">Products</a>
            </li>
            
            
            


  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  

  
    
  

  

  
    
  

  
    
    	
      <li><a href="/tags.html">Tags</a></li>
    	
    
  








            <li class='site'>
              <a href="https://twitter.com/merborne" id="twitter">
                <img src="/assets/images/site/twitter.png" alt="twitter" title="@merborne on Twitter" height="32" width="32" />
              </a>
            </li>
            <li class='site'>
              <a href="https://github.com/melborne" id="github">
                <img src="/assets/images/site/github.png" alt="github" title="@melborne on GitHub" height="24" width="24" />
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="content">
        
<div class="page-header span8">
  <div class="date"><span>09 August 2013</span></div>
  <h1 class='page-title'><a href="/2013/08/09/now-pikmin-come-to-graphviz">ピクミンがGraphvizにやって来た！</a> <small> Gvizアップデートのお知らせ </small></h1>
</div>

<div class="row">
  <div class="span9">
    <div class="ad" id="topAdsense">
      <script type="text/javascript"><!--
      google_ad_client = "ca-pub-8790567277062819";
      /* hp12c */
      google_ad_slot = "7055414638";
      google_ad_width = 728;
      google_ad_height = 90;
      //-->
      </script>
      <script type="text/javascript"
      src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script>
    </div>

    
<p>(追記：2014-3-3) Gvizについてのまとめ頁を作りました。</p>

<blockquote>
  <p><a href="/2014/02/27/gviz-posts/" title="Gvizの目次 - Rubyの世界からGraphvizの世界にこんにちは！">Gvizの目次 - Rubyの世界からGraphvizの世界にこんにちは！</a></p>
</blockquote>

<hr />

<p>任天堂のWiiU向けゲーム「<a href="http://www.nintendo.co.jp/wiiu/ac3j/index.html" title="ピクミン３">ピクミン３</a>」にハマってます。「ストーリーモード」もいいですが、ボッチじゃないなら「ミッションモード」と「ビンゴバトルモード」が最高です。ピクミンを集め、移動して、投げる。ただひたすらそれを繰り返すだけのゲームです。でも、ピクミンをいつ集め、どこに移動し、どのピクミンを投げるのか、それによって無限の組合せが生じ、その選択が勝負の行方を大きく左右するのです。段取り力が問われるのです。この段取りに対する不思議な向上意欲とピクミンの愛らしさとが相まって、僕はピクミンの世界から当分抜け出せそうにありません。</p>

<p><a href="http://www.amazon.co.jp/任天堂-WUP-P-AC3J-ピクミン3/dp/B00CTK1JR2?SubscriptionId=06WK2XPKDH9TJJ979P02&amp;tag=keyesblog05-22&amp;linkCode=xm2&amp;camp=2025&amp;creative=165953&amp;creativeASIN=B00CTK1JR2"><img class="amazon" src="http://ecx.images-amazon.com/images/I/615ai1TSkxL._SL160_.jpg" alt="noshadow" /></a>
<a href="http://www.amazon.co.jp/任天堂-WUP-P-AC3J-ピクミン3/dp/B00CTK1JR2?SubscriptionId=06WK2XPKDH9TJJ979P02&amp;tag=keyesblog05-22&amp;linkCode=xm2&amp;camp=2025&amp;creative=165953&amp;creativeASIN=B00CTK1JR2">ピクミン3</a></p>

<hr />

<p>さて今回は、愛くるしくもどこか悲しげな顔をした「ピクミン」たちを、拙作<code>Gviz</code>を使ってGraphviz上に出現させたいと思います。</p>

<p>で、その前にGvizをアップデートしましたのでそのお知らせと宣伝を…</p>

<h2 id="gviz-020">Gviz 0.2.0</h2>

<p>RubyによるGraphvizラッパー<code>Gviz</code>をアップデートしました（version 0.2.0）。</p>

<blockquote>
  <p><a href="https://rubygems.org/gems/gviz" title="gviz \| RubyGems.org \| your community gem host">gviz | RubyGems.org | your community gem host</a></p>
</blockquote>

<blockquote>
  <p><a href="https://github.com/melborne/Gviz" title="melborne/Gviz · GitHub">melborne/Gviz · GitHub</a></p>
</blockquote>

<p><code>Gviz</code>を使えば簡単に有向グラフや、米国統計地図や、地下鉄路線図や、フィボナッチと素数の出会いや、AKB48や、Rubyのロゴや、日本地図や、スペースインベーダーや、類似度世界地図などが描けます。</p>

<blockquote>
  <p><a href="/2012/09/25/ruby-plus-graphviz-should-eql-gviz/" title="Yet Another Ruby Graphviz Interfaceを作ったからみんなで大量のグラフを作って遊ぼうよ！">Yet Another Ruby Graphviz Interfaceを作ったからみんなで大量のグラフを作って遊ぼうよ！</a></p>

  <p><a href="/2012/09/27/usstates-map-data-vasualization-with-gviz/" title="Ruby Graphvizラッパー「Gviz」でアメリカ合衆国をデータビジュアライズしよう！">Ruby Graphvizラッパー「Gviz」でアメリカ合衆国をデータビジュアライズしよう！</a></p>

  <p><a href="/2012/10/02/draw-metro-map-with-gviz/" title="東京の地下鉄をGviz（Ruby Graphviz Wrapper）で描く">東京の地下鉄をGviz（Ruby Graphviz Wrapper）で描く</a></p>

  <p><a href="/2012/10/07/meet-prime-with-fibonacci/" title="素数とフィボナッチ数の出会いをGviz（Ruby Graphviz Wrapper）で描く">素数とフィボナッチ数の出会いをGviz（Ruby Graphviz Wrapper）で描く</a></p>

  <p><a href="/2012/10/16/add-gviz-command-to-gviz-gem/" title="GvizでAKB48をビジュアライズするよ！">GvizでAKB48をビジュアライズするよ！</a></p>

  <p><a href="/2012/12/04/simple-ruby-logo-with-gviz/" title="GraphvizでRubyのロゴは描けますか？">GraphvizでRubyのロゴは描けますか？</a></p>

  <p><a href="/2013/03/25/map-of-japan-2/" title="Graphvizで作る、私たちの国「日本」の今度こそ本当の姿かたち">Graphvizで作る、私たちの国「日本」の今度こそ本当の姿かたち</a></p>

  <p><a href="/2013/03/28/space-invader-invade-graphviz-kingdom/" title="スペースインベーダー、Graphviz侵略ス">スペースインベーダー、Graphviz侵略ス</a></p>

  <p><a href="/2013/04/23/map-of-national-flags-with-graphviz/" title="Graphvizで作る国旗の類似度世界地図">Graphvizで作る国旗の類似度世界地図</a></p>
</blockquote>

<h2 id="section">インストール</h2>
<p>Graphvizが必要です。自分のプラットフォームに合ったものを以下から入手して下さい。</p>

<blockquote>
  <p><a href="http://www.graphviz.org/Download..php" title="Download. \| Graphviz - Graph Visualization Software">Download. | Graphviz - Graph Visualization Software</a></p>
</blockquote>

<p>Gvizのインストールは<code>gem install gviz</code>でＯＫです。Rubyはたぶん1.9.3以降が必要となります。</p>

<h2 id="section-1">変更点</h2>
<p>ver0.2.0では機能の追加はありませんが、コマンドインタフェースに<a href="http://whatisthor.com/" title="Thor - Home">Thor</a>を使うことで仕様が少し変わりました（以前は、<a href="http://trollop.rubyforge.org/" title="Trollop">Trollop</a>を使っていました）。</p>

<p>ターミナル上で<code>gviz</code>コマンドを実行すると、簡単な説明とコマンドのリストが表示されます。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">% </span>gviz
Gviz is a tool <span class="k">for </span>generating graphviz dot data with simple Ruby<span class="s1">'s syntax.
It works with a graph spec file (defaulting to load '</span>graph.ru<span class="s1">').

Example of graph.ru:

  route :main =&gt; [:init, :parse, :cleanup, :printf]
  route :init =&gt; :make, :parse =&gt; :execute
  route :execute =&gt; [:make, :compare, :printf]

  save(:sample, :png)

Commands:
  gviz build [FILE]    # Build a graphviz dot data based on a file
  gviz help [COMMAND]  # Describe available commands or one specific command
  gviz man [NAME]      # Show available attributes, constants, colors for graphviz
  gviz version         # Show Gviz version</span></code></pre></div>

<h3 id="gviz-build">gviz buildコマンド</h3>

<p>以前の<code>gviz</code>コマンドは<code>gviz build</code>コマンドになりました。</p>

<p>gvizコマンドで表示される例に従って、’graph.ru’ファイルを用意しこのコマンドを実行します（ファイル名が’graph.ru’以外のときは引数としてファイル名を渡します）。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">try_gviz% </span>gviz build
<span class="gp">try_gviz% </span>ls
graph.ru   sample.dot sample.png
<span class="gp">try_gviz% </span>open sample.png</code></pre></div>

<p>以下の画像が得られます。</p>

<p><img src="/assets/images/2013/08/gviz_sample.png" alt="Alt title noshadow" /></p>

<h3 id="gviz-man">gviz manコマンド</h3>

<p>Graphvizで使用可能な属性や色の情報を表示するためのコマンドです。引数なしで実行すると引数として取れる属性が表示されます。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">try_gviz% </span>gviz man
Specify any of:
  graph, node, edge, subgraph, cluster
  arrows, shapes, layouts, output_formats
  color_names, color_schemes, full_color_names, full_color_schemes, svg_color_names, dark_colors

<span class="gp">try_gviz% </span>gviz man shapes
Arrows:
  box, lbox, rbox, obox, olbox, orbox, crow, lcrow, rcrow, diamond, ldiamond, rdiamond
  oldiamond, ordiamond, dot, odot, inv, linv, rinv, oinv, olinv, orinv, none, normal, lnormal
  onormal, olnormal, ornormal, tee, ltee, rtee, vee, lvee, rvee, curve, lcurve, rcurve
Shapes:
  box, polygon, ellipse, oval, circle, point, egg, triangle, plaintext, diamond, trapezium
  house, pentagon, hexagon, septagon, octagon, doublecircle, doubleoctagon
  invtriangle, invtrapezium, invhouse, Mdiamond, Msquare, Mcircle, rect, rectangle
  none, note, tab, folder, box3d, component, promoter, cds, terminator, utr, primersite
  fivepoverhang, threepoverhang, noverhang, assembly, signature, insulator
  rnastab, proteasesite, proteinstab, rpromoter, rarrow, larrow, lpromoter
Layouts:
  circo, dot, fdp, neato, nop, nop1, nop2, osage, patchwork, sfdp, twopi
Output formats:
  bmp, canon, dot, xdot, cmap, eps, fig, gd, gd2, gif, gtk, ico, imap, cmapx, imap_np, cmapx_np, ismap
  jpeg, jpe, pdf, plain, plain-ext, png, ps, ps2, svg, svgz, tif, tiff, vml, vmlz, vrml, wbmp, webp, xlib</code></pre></div>

<p><br /></p>

<h2 id="graphviz">Graphvizでピクミンを描く</h2>

<p>さて、Gvizの紹介が終わったので本題にいきましょう。ピクミンをGraphviz上で描きます。</p>

<p>と言っても、自分には絵心がないので、ネット上からピクミンの画像を拝借してそれをGraphviz上に転写する、ということにします（何の意味があるのかというのは置いておいて…）。</p>

<p>一方で、Graphvizにはそのノードに画像を貼り付ける<code>image</code>という属性があるので、これを使えば簡単に画像をGraphviz上に貼ることができてしまいます。これではあまりにも芸がないので、今回は以下のような方針をとります。</p>

<pre><code>1. 元画像における各ピクセルからその位置と色の情報を取得する。
2. 取得した各ピクセルをノードとしてGraphviz上に配置する。
</code></pre>

<h2 id="section-2">ピクセル情報の取得</h2>

<p>以下の画像を利用させて頂きます。</p>

<p><img src="/assets/images/2013/08/yellow_pikmin.png" alt="Alt title noshadow" /></p>

<p><a href="http://pikmin3.nintendo.com/_ui/img/chars/pikminology/yellow.png">yellow.png (PNG 画像, 256x490 px)</a> (<a href="http://pikmin3.nintendo.com/" title="Official Site - Pikmin 3 for Wii U">Official Site - Pikmin 3 for Wii U</a>)</p>

<p>軽くて電気に強く、穴掘りも得意な黄ピクミンです。かわいい。</p>

<p>ピクセル情報の取得には<a href="http://www.imagemagick.org/script/index.php" title="ImageMagick: Convert, Edit, Or Compose Bitmap Images">ImageMagick</a>とそのRubyインタフェースである<a href="http://www.imagemagick.org/RMagick/doc/index.html" title="RMagick 2.12.0 User's Guide and Reference">RMagick</a>を使います。</p>

<p><code>pikmin.rb</code>で次のようなコードを書いて、colors変数に各ピクセルの位置と色の情報を持ったハッシュを参照できるようにします。</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s2">"RMagick"</span>

<span class="n">image_file</span> <span class="o">=</span> <span class="s1">'yellow.png'</span>

<span class="n">img</span> <span class="o">=</span> <span class="no">Magick</span><span class="o">::</span><span class="no">ImageList</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">image_file</span><span class="p">).</span><span class="nf">scale</span><span class="p">(</span><span class="mi">0</span><span class="o">.</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># =&gt; yellow.png PNG 256x490=&gt;128x245 128x245+0+0 DirectClass 8-bit</span>

<span class="n">colors</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">img</span><span class="p">.</span><span class="nf">rows</span><span class="p">.</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">y</span><span class="o">|</span>
  <span class="n">img</span><span class="p">.</span><span class="nf">columns</span><span class="p">.</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">img</span><span class="p">.</span><span class="nf">pixel_color</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">).</span><span class="nf">to_color</span><span class="p">(</span><span class="no">Magick</span><span class="o">::</span><span class="no">AllCompliance</span><span class="p">,</span><span class="kp">false</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>
    <span class="n">colors</span><span class="p">[[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]]</span> <span class="o">=</span> <span class="n">color</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="nb">p</span> <span class="n">colors</span></code></pre></div>

<p><code>to_color</code>メソッドの第3引数に8を渡すことで8ビット表現のRGBを取得するようにしています。colorsの中身は座標をキー、色を値としたハッシュデータです。</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&gt;&gt;</span> <span class="p">{[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">14</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">16</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">17</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">18</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">19</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">21</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">22</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">23</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">24</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">26</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">27</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">28</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">29</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">31</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">32</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">33</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">34</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">35</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">36</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">37</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">38</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">39</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">40</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">41</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">42</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">43</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">44</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">45</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">46</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">47</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">48</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">49</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">51</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">52</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">53</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">54</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">55</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"#FAFFFE"</span><span class="p">,</span> <span class="p">[</span><span class="mi">56</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"#F7FFFD"</span><span class="p">,</span> <span class="p">[</span><span class="mi">57</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"#F8FFFE"</span><span class="p">,</span> <span class="p">[</span><span class="mi">58</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"#FFFFFF"</span><span class="p">,</span> <span class="p">[</span><span class="mi">59</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"#FDFFFF"</span><span class="p">,</span> <span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"#FAFFFE"</span><span class="p">,</span> <span class="p">[</span><span class="mi">61</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"#FAFFFD"</span><span class="p">,</span> <span class="p">[</span><span class="mi">62</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"#F8FFFF"</span><span class="p">,</span> <span class="p">[</span><span class="mi">63</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"#F9FEFF"</span><span class="p">,</span> <span class="p">[</span><span class="mi">64</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"#F8FAF8"</span><span class="p">,</span> <span class="p">[</span><span class="mi">65</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"#F8F9F8"</span><span class="p">,</span> <span class="p">[</span><span class="mi">66</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"#F8F8F8"</span><span class="p">,</span> <span class="p">[</span><span class="mi">67</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"#F8F8F8"</span><span class="p">,</span> <span class="p">[</span><span class="mi">68</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"#F5F8F8"</span><span class="p">,</span> <span class="p">[</span><span class="mi">69</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"#F5F8F8"</span><span class="p">,</span> <span class="p">[</span><span class="mi">70</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"#F1F8F6"</span><span class="p">,</span> <span class="p">[</span><span class="mi">71</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"#F1F8F9"</span><span class="p">,</span> <span class="p">[</span><span class="mi">72</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"#F3F5F5"</span><span class="p">,</span> <span class="p">[</span><span class="mi">73</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"#F1F0F0"</span><span class="p">,</span> <span class="p">[</span><span class="mi">74</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,</span> <span class="p">[</span><span class="mi">75</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span><span class="s2">"black"</span><span class="p">,.</span><span class="nf">.</span><span class="o">.</span></code></pre></div>

<p>ImageList#scaleで画像サイズを1/2にしましたが、依然ピクセル数が31,360(128*245)もあるので、処理が困難そうです。背景色（black）と偶数座標ピクセルを間引いて対処します。</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">img</span> <span class="o">=</span> <span class="no">Magick</span><span class="o">::</span><span class="no">ImageList</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">image_file</span><span class="p">).</span><span class="nf">scale</span><span class="p">(</span><span class="mi">0</span><span class="o">.</span><span class="mi">5</span><span class="p">)</span>

<span class="n">colors</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">img</span><span class="p">.</span><span class="nf">rows</span><span class="p">.</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">y</span><span class="o">|</span>
  <span class="n">img</span><span class="p">.</span><span class="nf">columns</span><span class="p">.</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span>
<span class="o">+</span>    <span class="k">next</span> <span class="k">if</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">].</span><span class="nf">all?</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:even?</span><span class="p">)</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">img</span><span class="p">.</span><span class="nf">pixel_color</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">).</span><span class="nf">to_color</span><span class="p">(</span><span class="no">Magick</span><span class="o">::</span><span class="no">AllCompliance</span><span class="p">,</span><span class="kp">false</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>
<span class="o">+</span>    <span class="n">colors</span><span class="p">[[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]]</span> <span class="o">=</span> <span class="n">color</span> <span class="k">unless</span> <span class="n">color</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="sr">/black/</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">colors</span><span class="p">.</span><span class="nf">size</span> <span class="c1"># =&gt; 7811</span></code></pre></div>

<p>このくらいの数なら対応できそうです。</p>

<h2 id="section-3">ノードの描画</h2>

<p>さて、ピクセル情報が取得できたので、これらの情報を使ってGraphviz上にノードを描画します。色はノードの<code>fillcolor</code>、位置は<code>pos</code>属性をそれぞれ使います。</p>

<p><code>pikmin.rb</code>に次のコードを書き足して、7811個のノードを描きます。</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">global</span> <span class="n">layout</span><span class="ss">:'neato'</span>
<span class="n">nodes</span> <span class="n">shape</span><span class="ss">:'circle'</span><span class="p">,</span> <span class="n">style</span><span class="ss">:'filled'</span>

<span class="n">colors</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span> <span class="n">val</span><span class="o">|</span>
  <span class="n">node</span> <span class="ss">:"</span><span class="si">#{</span><span class="n">x</span><span class="si">}#{</span><span class="n">y</span><span class="si">}</span><span class="ss">"</span><span class="p">,</span> <span class="n">label</span><span class="ss">:''</span><span class="p">,</span> <span class="n">color</span><span class="ss">:val</span><span class="p">,</span> <span class="n">fillcolor</span><span class="ss">:val</span><span class="p">,</span> <span class="n">pos</span><span class="ss">:"</span><span class="si">#{</span><span class="n">x</span><span class="si">}</span><span class="ss">,</span><span class="si">#{</span><span class="n">y</span><span class="si">}</span><span class="ss">!"</span>
<span class="k">end</span>

<span class="n">save</span> <span class="ss">:pikmin</span></code></pre></div>

<p><code>gviz build</code>を実行しGraphviz DOTデータを生成します。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">pikmin% </span>gviz build pikmin.rb
<span class="gp">pikmin% </span>open pikmin.dot</code></pre></div>

<p>さて、結果は…</p>

<p><img src="/assets/images/2013/08/gv_fail_pikmin.png" alt="Alt title noshadow" /></p>

<p>おおっ。</p>

<p>黄ピクミンがいる…けど…</p>

<p><br /></p>

<p>ノードサイズを小さくし、座標を10倍にして配置を調整します。またGraphvizの座標系は左下が原点のようなのでこれも直します。</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">global</span> <span class="n">layout</span><span class="ss">:'neato'</span>
<span class="o">+</span><span class="n">nodes</span> <span class="n">shape</span><span class="ss">:'circle'</span><span class="p">,</span> <span class="n">style</span><span class="ss">:'filled'</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">3</span>

<span class="n">colors</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span> <span class="n">val</span><span class="o">|</span>
<span class="o">+</span>  <span class="n">node</span> <span class="ss">:"</span><span class="si">#{</span><span class="n">x</span><span class="si">}#{</span><span class="n">y</span><span class="si">}</span><span class="ss">"</span><span class="p">,</span> <span class="n">label</span><span class="ss">:''</span><span class="p">,</span> <span class="n">color</span><span class="ss">:val</span><span class="p">,</span> <span class="n">fillcolor</span><span class="ss">:val</span><span class="p">,</span> <span class="n">pos</span><span class="ss">:"</span><span class="si">#{</span><span class="n">x</span><span class="o">*</span><span class="mi">10</span><span class="si">}</span><span class="ss">,</span><span class="si">#{</span><span class="o">-</span><span class="n">y</span><span class="o">*</span><span class="mi">10</span><span class="si">}</span><span class="ss">!"</span>
<span class="k">end</span>

<span class="n">save</span> <span class="ss">:pikmin</span></code></pre></div>

<p>さあ、どうでしょう。</p>

<p><img src="/assets/images/2013/08/gv_yellow_pikmin.png" alt="Alt title noshadow" /></p>

<p>黄ピクミン！かわいい！</p>

<p><br /></p>

<p>じゃあ、全員集合！</p>

<p><img src="/assets/images/2013/08/gv_red_pikmin.png" alt="noshadow" style="width:100px" />
<img src="/assets/images/2013/08/gv_blue_pikmin.png" alt="noshadow" style="width:100px" />
<img src="/assets/images/2013/08/gv_yellow_pikmin.png" alt="noshadow" style="width:100px" />
<img src="/assets/images/2013/08/gv_rock_pikmin.png" alt="noshadow" style="width:100px" />
<img src="/assets/images/2013/08/gv_pink_pikmin.png" alt="noshadow" style="width:100px" /></p>

<p>Graphvizでピクミンでした :-)</p>

<div><script src="https://gist.github.com/6192317.js?file="></script>
<noscript><pre><code></code></pre></noscript></div>

<blockquote>
  <p><a href="https://rubygems.org/gems/gviz" title="gviz \| RubyGems.org \| your community gem host">gviz | RubyGems.org | your community gem host</a></p>
</blockquote>

<blockquote>
  <p><a href="https://github.com/melborne/Gviz" title="melborne/Gviz · GitHub">melborne/Gviz · GitHub</a></p>
</blockquote>

<hr />

<p><a href="http://www.amazon.co.jp/任天堂-WUP-P-AC3J-ピクミン3/dp/B00CTK1JR2?SubscriptionId=06WK2XPKDH9TJJ979P02&amp;tag=keyesblog05-22&amp;linkCode=xm2&amp;camp=2025&amp;creative=165953&amp;creativeASIN=B00CTK1JR2"><img class="amazon" src="http://ecx.images-amazon.com/images/I/615ai1TSkxL._SL160_.jpg" alt="noshadow" /></a>
<a href="http://www.amazon.co.jp/任天堂-WUP-P-AC3J-ピクミン3/dp/B00CTK1JR2?SubscriptionId=06WK2XPKDH9TJJ979P02&amp;tag=keyesblog05-22&amp;linkCode=xm2&amp;camp=2025&amp;creative=165953&amp;creativeASIN=B00CTK1JR2">ピクミン3</a></p>



    <div class="ad" id="topAdsense">
      <script type="text/javascript"><!--
      google_ad_client = "ca-pub-8790567277062819";
      /* foot */
      google_ad_slot = "7511276945";
      google_ad_width = 728;
      google_ad_height = 90;
      //-->
      </script>
      <script type="text/javascript"
      src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script>
    </div>

    <hr>
    <ul class="social_button inline">
      <li id="hatena">
  <a href="http://b.hatena.ne.jp/entry/http://melborne.github.io/2013/08/09/now-pikmin-come-to-graphviz/" class="hatena-bookmark-button" data-hatena-bookmark-title="ピクミンがGraphvizにやって来た！" data-hatena-bookmark-layout="horizontal" title="このエントリーをはてなブックマークに追加"><img src="http://b.st-hatena.com/images/entry-button/button-only.gif" alt="このエントリーをはてなブックマークに追加" width="20" height="30" style="border: none;" /></a><script type="text/javascript" src="http://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
</li>

<li id="twitter">
  <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://melborne.github.io/2013/08/09/now-pikmin-come-to-graphviz/" data-text="ピクミンがGraphvizにやって来た！" data-via="merborne" data-lang="ja" data-size="" data-count="horizontal"></a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</li>

<li id="google">
  <link rel="canonical" href="http://melborne.github.io/2013/08/09/now-pikmin-come-to-graphviz/" />
  <g:plusone size="medium"></g:plusone>
  
  <script type="text/javascript">
    window.___gcfg = {lang: 'ja'};
  
    (function() {
      var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      po.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
  </script>
</li>

<li id="facebook">
  <div class="fb-like" data-href="http://melborne.github.io/2013/08/09/now-pikmin-come-to-graphviz/" data-layout="button_count" data-send="false" data-width="150" data-show-faces="false"></div>
</li>

<li></li>




    </ul>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/2013/08/07/yet-another-tilde-tips" title="チルダでRubyの式埋め込みをもっと便利に!?">&larr; Previous</a></li>
      
        <li><a href="/">Archive</a></li>
        <!--<li><a href="/archive.html">Archive</a></li>-->
      
        <li class="next"><a href="/2013/08/14/rbref-renewed-for-ruby200" title="更にもう一つの「るりま」の入り口 ─ Rbref">Next &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'melborne'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




  </div>
  
  <div class="span3">
    <div id="bookAd">
      <a href="/books/">
        <!--<img src="/assets/images/2012/start_ruby.jpg" alt="start_ruby" />-->
        <!--<img src="/assets/images/2012/jekyll_cover.jpg" alt="jekyll" />-->
        <!--<img src="/assets/images/2012/ruby_parallel_cover.png" alt="ruby_parallel" />-->
        <!--<img src="/assets/images/2012/js_oop_cover.png" alt="js_oop" />-->
        <!--<img src="/assets/images/2012/rack_cover.png" alt="rack" />-->
        <!--<img src="/assets/images/2013/02/ruby_object_cover.png" alt="ruby_object" />-->
        <!--<img src="/assets/images/2013/03/ruby_trivia_cover.png" alt="ruby_trivia" />-->
        <img src="/assets/images/books/ruby_pack8.png" alt="ruby_pack8" style="width:200px" />
      </a>
      <p id="comment">100円〜で好評発売中！<br/><a href="/books/">M'ELBORNE BOOKS</a></p>
    </div>

    <hr />
    

    <ul class="social_button inline">
      <li id="hatena">
  <a href="http://b.hatena.ne.jp/entry/http://melborne.github.io/2013/08/09/now-pikmin-come-to-graphviz/" class="hatena-bookmark-button" data-hatena-bookmark-title="ピクミンがGraphvizにやって来た！" data-hatena-bookmark-layout="horizontal" title="このエントリーをはてなブックマークに追加"><img src="http://b.st-hatena.com/images/entry-button/button-only.gif" alt="このエントリーをはてなブックマークに追加" width="20" height="30" style="border: none;" /></a><script type="text/javascript" src="http://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
</li>

<li id="twitter">
  <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://melborne.github.io/2013/08/09/now-pikmin-come-to-graphviz/" data-text="ピクミンがGraphvizにやって来た！" data-via="merborne" data-lang="ja" data-size="" data-count="horizontal"></a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</li>

<li id="google">
  <link rel="canonical" href="http://melborne.github.io/2013/08/09/now-pikmin-come-to-graphviz/" />
  <g:plusone size="medium"></g:plusone>
  
  <script type="text/javascript">
    window.___gcfg = {lang: 'ja'};
  
    (function() {
      var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      po.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
  </script>
</li>

<li id="facebook">
  <div class="fb-like" data-href="http://melborne.github.io/2013/08/09/now-pikmin-come-to-graphviz/" data-layout="button_count" data-send="false" data-width="150" data-show-faces="false"></div>
</li>

<li></li>




    </ul>

    <div class="ad" id="sideAdsense">
      <script type="text/javascript"><!--
      google_ad_client = "ca-pub-8790567277062819";
      /* sidebar */
      google_ad_slot = "0672114662";
      google_ad_width = 160;
      google_ad_height = 600;
      //-->
      </script>
      <script type="text/javascript"
      src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script>
    </div>
  </div>
</div>


      </div>

      <footer>
        <p><a rel="license" href="http://creativecommons.org/licenses/by-nc/2.1/jp/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc/2.1/jp/88x31.png" /></a>  kyoendo 2012 
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>        </p>
      </footer>

    </div> <!-- /container -->

    

    <script type="text/javascript">
      if (location.hostname != 'localhost') {
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-288751-18']);
        _gaq.push(['_trackPageview']);
  
        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
      };
    </script>

    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/ja_JP/all.js#xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>

    <script src="/assets/javascripts/jquery-1.7.2.min.js"></script>
    <script src="/assets/javascripts/lightbox.js"></script>

    <script type="text/javascript" src="https://gumroad.com/js/gumroad.js"></script>
  </body>
</html>

